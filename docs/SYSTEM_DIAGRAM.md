# System Architecture Diagram

```
╔══════════════════════════════════════════════════════════════════════════════╗
║                    Tab & Bookmark Manager System                              ║
╚══════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────┐
│                          USER INTERFACE LAYER                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │              Browser Extension (Chrome/Edge)                         │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────────────────┐ │   │
│  │  │   Popup UI   │  │  Background  │  │   Content Script         │ │   │
│  │  │  - Search    │  │  Service     │  │  - Page Content          │ │   │
│  │  │  - Suggestions│  │  Worker      │  │    Extraction            │ │   │
│  │  │  - Stats     │  │  - Capture   │  │                          │ │   │
│  │  └──────────────┘  └──────────────┘  └──────────────────────────┘ │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│                                    │ HTTP/REST API                           │
└────────────────────────────────────┼─────────────────────────────────────────┘
                                     │
┌────────────────────────────────────┼─────────────────────────────────────────┐
│                          APPLICATION LAYER                                   │
├────────────────────────────────────┴─────────────────────────────────────────┤
│                                                                               │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                    Backend API (Node.js/Express)                       │ │
│  │  ┌──────────────────────────────────────────────────────────────────┐ │ │
│  │  │                        API Routes                                 │ │ │
│  │  │  /api/tabs  /api/bookmarks  /api/search  /api/suggestions        │ │ │
│  │  └──────────────────────────────────────────────────────────────────┘ │ │
│  │  ┌──────────────────────────────────────────────────────────────────┐ │ │
│  │  │                       Controllers                                 │ │ │
│  │  │  Tab  Bookmark  Search  Suggestion  Archive                      │ │ │
│  │  └──────────────────────────────────────────────────────────────────┘ │ │
│  │  ┌──────────────────────────────────────────────────────────────────┐ │ │
│  │  │                         Services                                  │ │ │
│  │  │  - Archive Service (Puppeteer)                                   │ │ │
│  │  │  - Suggestion Service                                            │ │ │
│  │  │  - Automation Engine (node-cron)                                 │ │ │
│  │  └──────────────────────────────────────────────────────────────────┘ │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                               │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                 ML Service (Python/Flask)                              │ │
│  │  ┌──────────────────────────────────────────────────────────────────┐ │ │
│  │  │                      ML Endpoints                                 │ │ │
│  │  │  /api/analyze  /api/summarize  /api/classify  /api/embed         │ │ │
│  │  └──────────────────────────────────────────────────────────────────┘ │ │
│  │  ┌──────────────────────────────────────────────────────────────────┐ │ │
│  │  │                      ML Services                                  │ │ │
│  │  │  - NLP Service (BART, spaCy)                                     │ │ │
│  │  │  - Embeddings Service (Sentence Transformers)                    │ │ │
│  │  │  - Classification Service (TF-IDF)                               │ │ │
│  │  └──────────────────────────────────────────────────────────────────┘ │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                               │
└───────────────────────────────────────────────────────────────────────────────┘
                                     │
┌────────────────────────────────────┼─────────────────────────────────────────┐
│                          DATA & INFRASTRUCTURE LAYER                         │
├────────────────────────────────────┴─────────────────────────────────────────┤
│                                                                               │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │
│  │  PostgreSQL  │  │    Redis     │  │  Bull Queue  │  │ File Storage │   │
│  │  ┌────────┐  │  │  ┌────────┐  │  │  ┌────────┐  │  │  ┌────────┐  │   │
│  │  │ Tables │  │  │  │ Cache  │  │  │  │ Content│  │  │  │Archives│  │   │
│  │  │ - tabs │  │  │  │        │  │  │  │Analysis│  │  │  │ - HTML │  │   │
│  │  │ - marks│  │  │  └────────┘  │  │  ├────────┤  │  │  │ - PDF  │  │   │
│  │  │ - arch │  │  │              │  │  │Archive │  │  │  │ - PNG  │  │   │
│  │  │ - sugg │  │  │              │  │  ├────────┤  │  │  └────────┘  │   │
│  │  └────────┘  │  │              │  │  │Suggest │  │  │              │   │
│  │  pgvector    │  │              │  │  └────────┘  │  │              │   │
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘   │
│                                                                               │
└───────────────────────────────────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────────────────────────────────┐
│                          DEPLOYMENT & OPERATIONS                              │
├───────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │
│  │   Docker     │  │ Docker       │  │ GitHub       │  │ Monitoring   │   │
│  │ Containers   │  │ Compose      │  │ Actions      │  │ & Logging    │   │
│  │              │  │              │  │ (CI/CD)      │  │              │   │
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘   │
│                                                                               │
└───────────────────────────────────────────────────────────────────────────────┘

DATA FLOW:
──────────
1. Browser Extension → Capture tabs/bookmarks → POST to Backend API
2. Backend API → Store in PostgreSQL → Queue analysis job in Redis
3. Bull Worker → Process job → Call ML Service → Get analysis results
4. ML Service → Perform NLP → Return summary, entities, embeddings, category
5. Backend → Update database with analysis results → Store embeddings
6. User searches → Backend → Generate embedding → Vector similarity search
7. Automation Engine → Scheduled jobs → Generate suggestions → Detect patterns
8. Archive requests → Puppeteer → Capture page → Store HTML/PDF/PNG
